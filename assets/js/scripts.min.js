var new_scroll_position = 0;
var last_scroll_position;
var header = document.getElementById("js-header");
window.addEventListener('scroll', function(e) {
    last_scroll_position = window.scrollY;
    if (new_scroll_position < last_scroll_position && last_scroll_position > 40) { header.classList.remove("is-visible");
        header.classList.add("is-hidden"); } else if (new_scroll_position > last_scroll_position) { header.classList.remove("is-hidden");
        header.classList.add("is-visible"); }
    if (last_scroll_position < 1) { header.classList.remove("is-visible"); }
    new_scroll_position = last_scroll_position;
});
document.getElementById('js-toggle').onclick = function() { var el = document.getElementById("js-navbar-menu");
    el.classList.toggle("is-visible"); };
var accordion = document.getElementsByClassName("js-sidebar-menu").item(0);
var sections = [];
if (accordion) { sections = accordion.getElementsByClassName("has-submenu"); }

function openBelow(el) {}

function closeBelow(el) {}
for (var i = 0; i < sections.length; i++) {
    (function() {
        var section = sections.item(i),
            anchor = sections.item(i).children[0],
            below = sections.item(i).children[1];
        closeBelow(below, -below.offsetHeight);
        anchor.onclick = function() {
            if (section.getAttribute('class') == 'has-submenu active') { section.setAttribute('class', 'has-submenu');
                closeBelow(below); } else { section.setAttribute('class', 'has-submenu active');
                openBelow(below); }
        }
    })();
}
(function() {
    function showNewsletterOnScroll(e) { var position = window.scrollY; if (position > 500 && !newsletter.classList.contains('is-visible')) { newsletter.classList.add('is-visible'); } }
    var newsletter_submit = document.querySelector('.subscribe-popup-submit');
    var newsletter = document.querySelector('.subscribe-popup');
    if (newsletter_submit) { newsletter_submit.addEventListener('click', function() { localStorage.setItem('publii-subscribe', 'true'); });
        document.querySelector('.subscribe-popup-close').addEventListener('click', function(event) { event.preventDefault();
            localStorage.setItem('publii-subscribe', new Date().getTime());
            newsletter.classList.remove('is-visible');
            window.removeEventListener('scroll', showNewsletterOnScroll); }); }
    if (newsletter && localStorage.getItem('publii-subscribe') !== 'true' && (!localStorage.getItem('publii-subscribe') || new Date().getTime() - parseInt(localStorage.getItem('publii-subscribe'), 10) > (1000 * 60 * 60 * 24 * 30))) { window.addEventListener('scroll', showNewsletterOnScroll);
        setTimeout(function() { newsletter.classList.add('is-visible'); }, parseInt(newsletter.getAttribute('data-time'), 10)); }
})();
(function() {
    var download_submit = document.querySelector('.download-popup-submit');
    var download = document.querySelector('.js-download-popup');
    var download_overlay = document.querySelector('.js-download-popup-overlay');
    if (download_submit) { download_submit.addEventListener('click', function() { localStorage.setItem('download-publii-subscribe', 'true'); });
        document.querySelector('.js-download-popup-close').addEventListener('click', function(event) { event.preventDefault();
            localStorage.setItem('download-publii-subscribe', new Date().getTime());
            download.classList.remove('is-visible');
            download_overlay.classList.remove('is-visible'); }); }
    if (download && localStorage.getItem('download-publii-subscribe') !== 'true' && (!localStorage.getItem('download-publii-subscribe') || new Date().getTime() - parseInt(localStorage.getItem('download-publii-subscribe'), 10) > (1000 * 60 * 60 * 24 * 30))) { var download_popup_initialization_link = document.querySelectorAll('.js-download-subscribe-popup');
        Array.from(download_popup_initialization_link).forEach(link => { link.addEventListener('click', function(event) { download.classList.add('is-visible');
                download_overlay.classList.add('is-visible'); }); }); }
})();
(function() {
    var Config = { Link: ".js-share", Width: 500, Height: 500 };
    var slink = document.querySelectorAll(Config.Link);
    for (var a = 0; a < slink.length; a++) { slink[a].onclick = PopupHandler; }

    function PopupHandler(e) {
        e = (e ? e : window.event);
        var t = (e.target ? e.target : e.srcElement);
        var px = Math.floor(((screen.availWidth || 1024) - Config.Width) / 2),
            py = Math.floor(((screen.availHeight || 700) - Config.Height) / 2);
        var link_href = t.href ? t.href : t.parentNode.href;
        var popup = window.open(link_href, "social", "width=" + Config.Width + ",height=" + Config.Height + ",left=" + px + ",top=" + py + ",location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1");
        if (popup) { popup.focus(); if (e.preventDefault) e.preventDefault();
            e.returnValue = false; }
        return !!popup;
    }
})();